---
title: "NCCS BMF Data Catalog"
format: html
editor: visual
execute: 
  echo: false
  warning: false
---

```{r}
#| echo: false

library( dplyr )
library( knitr )
library( kableExtra )
library( stringr )
library( flextable )
library( pander )

GH.RAW <- "https://raw.githubusercontent.com/UrbanInstitute/nccs/main/catalogs/"
d <- read.csv( paste0( GH.RAW, "AWS-NCCSDATA.csv" ) )
source( paste0( GH.RAW, "build-catalog-functions.R" ) )
```

<br>

<hr>

<br>

**YEAR**

Files are organized by **tax year**, not calendar year, filing year, or accounting year. See the Research Handbook for details on the differences.

<br>

<hr>

<br>

#### Business Master Files

```{r}
#| echo: false
#| output: asis
 
paths <- get_file_paths(series = "bmf",
                        paths=d$Key)
s3_urls  <- make_s3_urls( paths )
archive_urls <- make_archive_urls(series = "bmf",
                                  paths = paths)

download_buttons  <- make_download_buttons(s3_urls)
profile_buttons <- make_profile_buttons(archive_urls)
YEAR <- get_year( paths )
MONTH <- get_month(paths)

catalog <- 
  data.frame( 
    download_buttons,
    profile_buttons,
    YEAR=YEAR,
    MONTH = MONTH)
```

```{r}
#| echo: false

catalog %>%
  knitr::kable( escape=FALSE,
                col.names = c( "",
                               "",
                               "Year",
                               "Month") ) %>%
  kableExtra::kable_styling()
```

<br>

<hr>

<br>

```{=html}
<style>


h1.title {
 font-size: 60px;
 color: #0a4c6a;
}


h4, .h4 {
    font-size: 40px;
    color: #1696d2;
    margin-bottom: 50px;
}



.button {
  background-color: white;
  color:  #12719e;
  border: 2px solid  #12719e;   /* #008CBA; */
  padding: 5px 10px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 14px;
  border-radius: 12px;
  width: 150px;
}
 
.button {
  transition-duration: 0.4s;
}

.button:hover {
  background-color: #1696d2; 
  color: white;
  border: 2px solid #12719e;
}


.button2 {
  background-color: white;
  color: #12719e;
  border: 2px solid #9d9d9d;   /* #008CBA; */
  padding: 5px 10px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 14px;
  border-radius: 12px;
  width: 150px;
}

.button2 {
  transition-duration: 0.4s;
}

.button2:hover {
  background-color: #fff2cf; 
  color: #1696d2;
  font-weight: bold;
  border: 2px solid #1696d2;
}


.center {text-align: center;}

table td {
  vertical-align: middle;
}

blockquote {
    border-left: 4px solid #1696d2;
    margin-left: 10px;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding: 15px;
}

.button3 {
  background-color: #0a4c6a;
  color: white;
  border: 2px solid #0a4c6a;   
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  border-radius: 4px;
  width: 100px;
}
</style>
```
